$epub-base-typography: true !default;
@if $epub-base-typography {

    body {
        margin: 0;
        padding: 0;
        background-color: $color-background;
        font-family: $font-text-main;
        font-size: $font-size-default;
        color: $color-text-main;
        line-height: $line-height-default;
        overflow-x: hidden;
    }
    h1, h2, h3, h4, h5, h6 {
        font-family: $font-text-secondary;
        font-size: $font-size-default;
        font-weight: bold;
        line-height: $line-height-default;
        page-break-after: avoid;
        margin: $line-height-default 0 0 0;
    }
    h1 {
        font-family: $font-display-main;
        font-size: $font-size-default * $font-size-bigger;
        line-height: 1;
        margin: ($line-height-default) 0 ($line-height-default * 0.5) 0;
    }
    h2 {
        font-size: $font-size-default * ($font-size-bigger * 0.75);
        line-height: 1;
        margin: ($line-height-default) 0 ($line-height-default * 0.5) 0;
    }
    h3 {}
    h4 {
        font-style: italic;
        font-weight: inherit;
    }
    h5 {
        font-family: $font-text-main;
        font-style: italic;
        font-weight: inherit;
    }
    h6 {
        font-family: $font-text-main;
        font-weight: inherit;
    }
    p {
        margin: 0;
        text-indent: $font-size-default;
    }
    p:first-of-type {
        text-indent: 0;
    }

    // Lists

    ol {
        list-style: decimal;
        list-style-position: outside;
        margin: 0 0 $line-height-default 1em;
    }
    ul {
        list-style-type: disc;
        list-style-position: outside;
        margin: 0 0 $line-height-default 1em;
    }
    ul ul, ol ol, blockquote ul ul, blockquote ol ol {
        margin-bottom: 0;
    }
    ol ol {
        list-style-type: lower-alpha;
    }


    // Blockquotes

    blockquote {
        margin: $line-height-default 0;
        padding: 0 $line-height-default;
        p:first-of-type {
            text-indent: 0;
        }
        p:last-child, & ol:last-child, & ul:last-child {
            margin-bottom: 0;
        }
    }

    // Definition lists

    dl {
        margin: $line-height-default 0;
    }
    dt {}
    dd {
        margin: 0 0 $line-height-default 0;
    }

    // Horizontal rules

    // Used in text as dividers (*** in markdown)

    $text-divider-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjc3MDVFMzk2MTcwNzExRTc5RkM2QkQ0RENBNTZDNUVFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjc3MDVFMzk3MTcwNzExRTc5RkM2QkQ0RENBNTZDNUVFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzcwNUUzOTQxNzA3MTFFNzlGQzZCRDREQ0E1NkM1RUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzcwNUUzOTUxNzA3MTFFNzlGQzZCRDREQ0E1NkM1RUUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5ETUlGAAABNUlEQVR42mJkZGRkQAcJcbGm796+y3777q3Ny1evpV++esUOEhcXE/spLib6VFhI+IiQsNDUBYsWn8bQDDIQhjNSU5j8fbwXaWtpfQLy/+PDIDUgtSA9yGbAGSlJScrOjg4nCBmEjkF6QHpRDATZQo5hyIbCXAo2EOR0cg2DYagZDAyJ8XGmxIQZMWEKMosJFJvXrl/nZaAQgMwAmcUEShoMVAIgs5hA6YxaBoLMYuTj4/v3+fNnRmoYyMvL+5+JgcqACZSdqGUYyCwmUN6knoGiT5lAGZ1aBoLMYgKVGlqamp8pNQxkBsgsqmc9cCxLSkomODnYnyTXdSC9IDNQykNqFV/MsBL7/IUL791cXOZJS0oqMbOwKL1+84adUJhZmputkpeX9509b947pAKbulUAQIABAFp15lwbDZGGAAAAAElFTkSuQmCC) !default;

    hr {
        // Adobe Digital Editions doesn't support background size, so we must
        // use a small png to ensure the image isn't too big there.
        // Amazon Kindle does not support `content:` or `border: 0`in hr,
        // so we can't use those, and must use background-image.
        content: normal;
        background-image: $text-divider-image;
        background-repeat: no-repeat;
        background-position: center; 
        background-size: 0.5em;
        border: 0;
        height: $line-height-default * 2;
        line-height: $line-height-default;
        margin: $line-height-default auto;
        text-indent: 0;
        & + p {
            text-indent: 0;
        }
    }


    // Superscripts and subscripts

    sup, sub {
        line-height: 100%;
        font-size: 1em * $font-size-smaller;
    }
    sup {
        vertical-align: super;
    }
    sub {
        vertical-align: sub;
    }

    // Links

    a {
        text-decoration: none;
        color: $color-links;
    }

    // Bold and italic
    em {
        font-style: italic;
    }
    strong {
        font-weight: bold;
    }

    // Forms

    input,
    textarea {
        padding: 0.75em 0.75em;
        font-family: $font-text-secondary;
        font-size: inherit;
        color: inherit;
        border: 1px solid $color-mid;
        display: block;
        margin: $line-height-default 0;
        width: 100%;
        &[type="submit"] {
            width: auto;
        }
    }
    textarea {
        min-height: $line-height-default * 3;
    }

    // An option to change the default text-indented paragraphs
    // and close-up lists etc. to have space-between instead.
    @if $spaced-paras {
        p {
            margin-bottom: $line-height-default;
            text-indent: 0;
        }
    }

}
